"use strict";(()=>{var e={};e.id=186,e.ids=[186],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},1241:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>h,patchFetch:()=>x,requestAsyncStorage:()=>d,routeModule:()=>c,serverHooks:()=>f,staticGenerationAsyncStorage:()=>g});var s={};r.r(s),r.d(s,{GET:()=>l,runtime:()=>u});var a=r(9303),n=r(8716),i=r(670),o=r(7070);let u="nodejs",p=new Map;function m(e,{min:t,max:r}={}){let s=Number(e);if(Number.isNaN(s))return 0;let a="number"==typeof t?Math.max(s,t):s;return"number"==typeof r?Math.min(a,r):a}async function l(e){var t;let r,s;if(!function(e){let t=e.headers.get("origin"),r=e.headers.get("referer"),s=e.nextUrl.origin;return(!t||t===s)&&(!r||r.startsWith(s))}(e))return o.NextResponse.json({message:"Forbidden"},{status:403});if(!function(e){let t=Date.now(),r=p.get(e);return!r||t>r.resetAt?(p.set(e,{tokens:29,resetAt:t+3e5}),!0):!(r.tokens<=0)&&(r.tokens-=1,!0)}(function(e){let t=e.headers.get("x-forwarded-for");if(t)return t.split(",")[0].trim();let r=e.headers.get("x-real-ip");return r?r.trim():""}(e)||"unknown"))return o.NextResponse.json({message:"Too many requests"},{status:429});let a=process.env.N8N_READ_URL;if(!a)return o.NextResponse.json({message:"Server not configured"},{status:500});let n=process.env.N8N_READ_AUTH;try{r=await fetch(a,{method:"GET",headers:{Accept:"application/json",...n?{Authorization:n}:{}},cache:"no-store"})}catch(e){return o.NextResponse.json({message:"Upstream error"},{status:502})}if(!r.ok){let e="";try{e=(await r.text()).slice(0,500)}catch{}let t=r.status||502,s=r.statusText||"";return o.NextResponse.json({message:`Upstream error ${t} ${s}`.trim(),details:e},{status:t})}try{s=await r.json()}catch{return o.NextResponse.json({message:"Invalid upstream JSON"},{status:502})}let i=Array.isArray(t=s)?t.map(e=>{let t=e?.highlights,r=[];Array.isArray(t)?r=t.map(String):"string"==typeof t&&(r=t.split(",").map(e=>e.trim()).filter(Boolean));let s=e?.skills??t,a=[];Array.isArray(s)?a=s.map(String):"string"==typeof s&&(a=s.split(",").map(e=>e.trim()).filter(Boolean));let n=m(e?.yearsExperience,{min:0}),i=m(e?.credibilityScore,{min:0,max:100}),o=m(e?.atsScore,{min:0,max:100}),u=e?.createdAt?String(e.createdAt):new Date().toISOString();return{id:String(e?.id??""),name:String(e?.name??""),email:String(e?.email??""),jobTitle:String(e?.jobTitle??""),driveUrl:String(e?.driveUrl??""),summary:String(e?.summary??""),highlights:r,skills:a,yearsExperience:n,credibilityScore:i,atsScore:o,createdAt:u}}):[];return o.NextResponse.json({ok:!0,updatedAt:new Date().toISOString(),data:i})}let c=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/recruiter/data/route",pathname:"/api/recruiter/data",filename:"route",bundlePath:"app/api/recruiter/data/route"},resolvedPagePath:"C:\\Users\\DAVID\\Documents\\Resumrr\\resumrr\\app\\api\\recruiter\\data\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:d,staticGenerationAsyncStorage:g,serverHooks:f}=c,h="/api/recruiter/data/route";function x(){return(0,i.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:g})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,972],()=>r(1241));module.exports=s})();