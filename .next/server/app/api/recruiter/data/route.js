"use strict";(()=>{var e={};e.id=186,e.ids=[186],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},1241:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>h,patchFetch:()=>x,requestAsyncStorage:()=>c,routeModule:()=>l,serverHooks:()=>f,staticGenerationAsyncStorage:()=>g});var n={};r.r(n),r.d(n,{GET:()=>d,runtime:()=>u});var s=r(9303),a=r(8716),i=r(670),o=r(7070);let u="nodejs",p=new Map;function m(e,{min:t,max:r}={}){let n=Number(e);if(Number.isNaN(n))return 0;let s="number"==typeof t?Math.max(n,t):n;return"number"==typeof r?Math.min(s,r):s}async function d(e){var t;let r,n;if(!function(e){let t=e.headers.get("origin"),r=e.headers.get("referer"),n=e.nextUrl.origin;return(!t||t===n)&&(!r||r.startsWith(n))}(e))return o.NextResponse.json({message:"Forbidden"},{status:403});if(!function(e){let t=Date.now(),r=p.get(e);return!r||t>r.resetAt?(p.set(e,{tokens:29,resetAt:t+3e5}),!0):!(r.tokens<=0)&&(r.tokens-=1,!0)}(function(e){let t=e.headers.get("x-forwarded-for");if(t)return t.split(",")[0].trim();let r=e.headers.get("x-real-ip");return r?r.trim():""}(e)||"unknown"))return o.NextResponse.json({message:"Too many requests"},{status:429});let s=process.env.N8N_READ_URL;if(!s)return o.NextResponse.json({message:"Server not configured"},{status:500});let a=process.env.N8N_READ_AUTH;try{r=await fetch(s,{method:"GET",headers:{Accept:"application/json",...a?{Authorization:a}:{}},cache:"no-store"})}catch(e){return o.NextResponse.json({message:"Upstream error"},{status:502})}if(!r.ok)return o.NextResponse.json({message:"Upstream returned error"},{status:502});try{n=await r.json()}catch{return o.NextResponse.json({message:"Invalid upstream JSON"},{status:502})}let i=Array.isArray(t=n)?t.map(e=>{let t=e?.highlights,r=[];Array.isArray(t)?r=t.map(String):"string"==typeof t&&(r=t.split(",").map(e=>e.trim()).filter(Boolean));let n=e?.skills??t,s=[];Array.isArray(n)?s=n.map(String):"string"==typeof n&&(s=n.split(",").map(e=>e.trim()).filter(Boolean));let a=m(e?.yearsExperience,{min:0}),i=m(e?.credibilityScore,{min:0,max:100}),o=m(e?.atsScore,{min:0,max:100}),u=e?.createdAt?String(e.createdAt):new Date().toISOString();return{id:String(e?.id??""),name:String(e?.name??""),email:String(e?.email??""),jobTitle:String(e?.jobTitle??""),driveUrl:String(e?.driveUrl??""),summary:String(e?.summary??""),highlights:r,skills:s,yearsExperience:a,credibilityScore:i,atsScore:o,createdAt:u}}):[];return o.NextResponse.json({ok:!0,updatedAt:new Date().toISOString(),data:i})}let l=new s.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/recruiter/data/route",pathname:"/api/recruiter/data",filename:"route",bundlePath:"app/api/recruiter/data/route"},resolvedPagePath:"C:\\Users\\DAVID\\Documents\\Resumrr\\resumrr\\app\\api\\recruiter\\data\\route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:c,staticGenerationAsyncStorage:g,serverHooks:f}=l,h="/api/recruiter/data/route";function x(){return(0,i.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:g})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[948,972],()=>r(1241));module.exports=n})();